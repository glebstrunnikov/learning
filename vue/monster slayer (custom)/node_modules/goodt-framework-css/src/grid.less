@grid-col-gap-h: @spacer-layout2;
@grid-col-gap-v: 0;

.flex-col-size(@size) {
    max-width: @size;
    flex-basis: @size;
}

.row {
    position: relative;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-items: stretch;
    margin-left: -@grid-col-gap-h;
    margin-bottom: -@grid-col-gap-v;

	&.row-collapse,
	.row-gap-none {
        margin-left: 0;
        margin-bottom: 0;

        > .col {
            padding-left: 0;
            margin-bottom: 0;
        }
	}
	each(range(1, 9), {
		@p: ~'spacer@{value}';
		&.row-gap-@{value} {
			margin-left: -@@p;
			margin-bottom: -@@p;
			> .col {
				padding-left: @@p;
				margin-bottom: @@p;
			}
		};
	});
    each(range(1, 7), {
		@p: ~'spacer-layout@{value}';
		&.row-gap-l@{value} {
			margin-left: -@@p;
			margin-bottom: -@@p;
			> .col {
				padding-left: @@p;
				margin-bottom: @@p;
			}
		};
	});
    // horizontal
    &.row-hgap-none {
        margin-left: 0;
        > .col {
            padding-left: 0;
        }
    }
    each(range(1, 9), {
		@p: ~'spacer@{value}';
		&.row-hgap-@{value} {
			margin-left: -@@p;
			> .col {
				padding-left: @@p;
			}
		};
	});
    each(range(1, 7), {
		@p: ~'spacer-layout@{value}';
		&.row-hgap-l@{value} {
			margin-left: -@@p;
			> .col {
				padding-left: @@p;
			}
		};
	});
    // vertical
    &.row-vgap-none {
        margin-bottom: 0;
        > .col {
            margin-bottom: 0;
        }
    }
    each(range(1, 9), {
		@p: ~'spacer@{value}';
		&.row-vgap-@{value} {
			margin-bottom: -@@p;
			> .col {
				margin-bottom: @@p;
			}
		};
	});
    each(range(1, 7), {
		@p: ~'spacer-layout@{value}';
		&.row-vgap-l@{value} {
			margin-bottom: -@@p;
			> .col {
				margin-bottom: @@p;
			}
		};
	});
}
.col {
    position: relative;
    flex-basis: 0;
    flex-grow: 1;
    flex-shrink: 0;
    padding-left: @grid-col-gap-h;
    margin-bottom: @grid-col-gap-v;
    box-sizing: border-box;

    &.col-auto {
        flex-grow: 0;
        flex-shrink: 1;
        flex-basis: auto;
    }

    // vertical align
    &.col-vtop {
        align-self: flex-start;
    }
    &.col-vbot {
        align-self: flex-end;
    }
    &.col-vmid {
        align-self: center;
    }

    // 5-100
    each(range(5, 100, 5), {
		&.col-@{value} {
			.flex-col-size(~'@{value}%');
		}
	});
    &.col-33 {
        .flex-col-size(33.33%);
    }
    &.col-66 {
        .flex-col-size(66.66%);
    }
    // 1-12
    each(range(12), {
		&.col-@{value}-12 {
			.flex-col-size(@value*100%/12);
		}
	});
    // 1-24
    each(range(24), {
		&.col-@{value}-24 {
			.flex-col-size(@value*100%/24);
		}
	});
}

.media(@viewport-xl, {
	.col {
		&.xl-col-auto {
			flex-grow: 0;
			flex-shrink: 1;
			flex-basis: auto;
		}
		// vertical align
		&.xl-col-vtop { align-self: flex-start; }
		&.xl-col-vbot { align-self: flex-end; }
		&.xl-col-vmid { align-self: center; }
		// sizes
		// 5-100
		each(range(5, 100, 5), {
			&.xl-col-@{value} {
				.flex-col-size(~'@{value}%');
			}
		});
		&.xl-col-33 { .flex-col-size(33.33%); }
		&.xl-col-66 { .flex-col-size(66.66%); }
		// 1-12
		each(range(12), {
			&.xl-col-@{value}-12 {
				.flex-col-size(@value*100%/12);
			}
		});
		// 1-24
		each(range(24), {
			&.xl-col-@{value}-24 {
				.flex-col-size(@value*100%/24);
			}
		});
	}
});

.media(@viewport-l, {
	.col {
		&.l-col-auto {
			flex-grow: 0;
			flex-shrink: 1;
			flex-basis: auto;
		}
		// vertical align
		&.l-col-vtop { align-self: flex-start; }
		&.l-col-vbot { align-self: flex-end; }
		&.l-col-vmid { align-self: center; }
		// sizes
		// 5-100
		each(range(5, 100, 5), {
			&.l-col-@{value} {
				.flex-col-size(~'@{value}%');
			}
		});
		&.l-col-33 { .flex-col-size(33.33%); }
		&.l-col-66 { .flex-col-size(66.66%); }
		// 1-12
		each(range(12), {
			&.l-col-@{value}-12 {
				.flex-col-size(@value*100%/12);
			}
		});
		// 1-24
		each(range(24), {
			&.l-col-@{value}-24 {
				.flex-col-size(@value*100%/24);
			}
		});
	}
});

.media(@viewport-m, {
	.col {
		&.m-col-auto {
			flex-grow: 0;
			flex-shrink: 1;
			flex-basis: auto;
		}
		// vertical align
		&.m-col-vtop { -ms-flex-item-align: start; align-self: flex-start; }
		&.m-col-vbot { -ms-flex-item-align: end; align-self: flex-end; }
		&.m-col-vmid { -ms-flex-item-align: center; align-self: center; }
		// sizes
		// 5-100
		each(range(5, 100, 5), {
			&.m-col-@{value} {
				.flex-col-size(~'@{value}%');
			}
		});
		&.m-col-33 { .flex-col-size(33.33%); }
		&.m-col-66 { .flex-col-size(66.66%); }
		// 1-12
		each(range(12), {
			&.m-col-@{value}-12 {
				.flex-col-size(@value*100%/12);
			}
		});
		// 1-24
		each(range(24), {
			&.m-col-@{value}-24 {
				.flex-col-size(@value*100%/24);
			}
		});
	}
});

.media(@viewport-s, {
	.col {
		// sizes -- reset
		// 5-100
		each(range(5, 100, 5), {
			&.col-@{value},
			&.xl-col-@{value},
			&.l-col-@{value},
			&.m-col-@{value} {
				.flex-col-size(100%);
			}
		});
		&.col-33, &.col-66,
		&.xl-col-33, &.xl-col-66,
		&.l-col-33, &.l-col-66,
		&.m-col-33, &.m-col-66 { .flex-col-size(100%); }
		// 1-12
		each(range(12), {
			&.col-@{value}-12,
			&.xl-col-@{value}-12,
			&.l-col-@{value}-12,
			&.m-col-@{value}-12 {
				.flex-col-size(100%);
			}
		});
		// 1-24
		each(range(24), {
			&.col-@{value}-24,
			&.xl-col-@{value}-24,
			&.l-col-@{value}-24,
			&.m-col-@{value}-24 {
				.flex-col-size(100%);
			}
		});

		&.s-col-auto {
			flex-grow: 0;
			flex-shrink: 1;
			flex-basis: auto;
		}
		// vertical align
		&.s-col-vtop { align-self: flex-start; }
		&.s-col-vbot { align-self: flex-end; }
		&.s-col-vmid { align-self: center; }
		// sizes
		// 5-100
		each(range(5, 100, 5), {
			&.s-col-@{value} {
				.flex-col-size(~'@{value}%');
			}
		});
		&.s-col-33 { .flex-col-size(33.33%); }
		&.s-col-66 { .flex-col-size(66.66%); }
		// 1-12
		each(range(12), {
			&.s-col-@{value}-12 {
				.flex-col-size(@value*100%/12);
			}
		});	
		// 1-24
		each(range(24), {
			&.s-col-@{value}-24 {
				.flex-col-size(@value*100%/24);
			}
		});
	}
});
